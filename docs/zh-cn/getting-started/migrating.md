# 迁移到新计算机

如果您已经充分利用Zettlr的功能，最终将会创建一个包含多个工作区（workspace）的庞大仓库、互相连接的笔记，以及可能还有一些自定义设置。当更换计算机时，或者迁移到新的操作系统时，您显然会希望将这些数据进行迁移。

令人高兴的是，这一过程很简单，通常包括以下四个步骤：

1. 在旧计算机上备份应用程序设置和包含笔记的工作区。
2. 将应用程序设置迁移到新计算机。
3. 将包含笔记的工作区迁移到新计算机。
4. 重新连接您的引用管理器（reference manager）（如果您使用的话）。

## 备份旧计算机上的数据

### 应用程序设置

如果您对Zettlr进行了任何自定义设置，或者您希望保留有关您的笔记的各种统计数据，那么您可能需要备份并复制一些配置文件到新计算机。这些配置文件数据位于_application data path_路径中，这是一个配置文件夹，其位置取决于您的操作系统：

* **Windows：**C:\Users\<用户名>\AppData\Roaming\Zettlr（请注意AppData是一个隐藏文件夹，因此您可能需要更改Windows资源管理器的设置以显示它）
* **macOS：**/Users/<用户名>/Library/Application Support/Zettlr（打开Finder窗口，按住"Alt"键并单击"前往（Go）"菜单，然后单击出现的"库（Library）"选项）
* **Linux：**/home/<用户名>/.config/Zettlr（请注意`.config`是一个隐藏文件夹，因此您可能需要使用命令行来打开它）

一旦找到这个文件夹，将里面的以下文件和子文件夹复制移动到新计算机：

* `stats.json`（您的写作统计数据）
* `config.json`（应用程序设置，请参阅下面的_"温馨提示"_）
* `custom.css`（您的自定义CSS，如果有的话）
* `tags.json`（颜色标记的标签）
* `targets.json`（您的写作目标）
* `user.dic`（您的自定义词典）
* `defaults`（文档导入和导出的默认设置）
* `snippets`（设置用于自动填充笔记内容的任何片段（snippets））

### 包含笔记的工作区

在旧计算机上备份包含笔记的工作区文件夹。如果您忘记了这些文件夹的位置，可以在Zettlr的文件管理器（File Manager）中右键单击工作区，然后选择上下文菜单中的`Reveal in Finder/Explorer/File Browser`（名称视操作系统而有所不同）。这将在计算机的文件浏览器中打开相应的文件夹。如果您需要查找/备份个别笔记文件，例如，不属于工作区的笔记，您也可以在Zettlr文件管理器中右键单击它，并选择上下文菜单中的Reveal in Finder/Explorer/File Browser（名称视操作系统而有所不同）。

## 迁移应用程序设置

在新计算机上安装并启动Zettlr。这将创建一个配置目录，您可以将旧应用程序设置文件的备份复制进去。应用程序启动之后，请再次退出它。在复制旧的应用程序设置之前，请避免在Zettlr中添加或打开任何笔记或工作区，否则您将不得不在之后重新添加它们（请参阅下面的"温馨提示"）。

一旦退出应用程序，请将您希望保留的所有旧应用程序设置备份复制到新计算机的配置文件夹（请参考上面有关确定您操作系统的应用程序数据路径的指导）。如果系统提示您是否替换现有文件，您可以选择"是"。接下来，来自旧计算机的应用程序设置就算是复制成功了。

**关于`config.json`的温馨提示:** 您备份的`config.json`包含了旧计算机上各个工作区和笔记的位置信息。当您在添加了旧的设置文件`config.json`后重新启动新安装的Zettlr，它将自动删除旧设置中工作区的路径，因为它们已不再有效。同时，如果在恢复旧的`config.json`之前在新安装的Zettlr中添加了任何工作区或笔记，Zettlr将忘记这些文件夹和文件的位置。简而言之，在看到空窗口时不用担心。只要在下一步中重新打开它们，您的笔记和工作区将立即恢复。

## 迁移包含笔记的工作区

如果新计算机上的Zettlr处于关闭状态，请启动它。因为Zettlr工作区只是您计算机上的文件夹，而笔记只是文本文件，所以将这些数据迁移到新计算机就像将这些文件夹和文件的备份从旧计算机复制到新计算机一样简单。关于您的笔记和它们之间的连接的所有元数据，笔记ID、标签等，都保存在各自的笔记文件中，这意味着这些信息会随文件一起传输。

一旦将备份文件放到新计算机上，您可以通过选择`File > Open Workspace …`菜单选项并选择该工作区文件夹（或者如果您需要导入不属于工作区的个别笔记，则选择`File > Open`）来将每个工作区以及其中包含的文件添加到新安装的Zettlr中。请注意，这与将任何其他文件夹添加到Zettlr时使用的相同过程是一样的。工作区文件夹，包括其中包含的笔记，将添加到新的Zettlr安装中。笔记之间的连接也将保留，但是如果您有链接到位于不同工作区中的笔记的链接，您还需要确保同样在新安装的Zettlr中打开了这些工作区文件夹及其内容。

!!! 注意

当您的工作区变得很大时，首次打开可能需要一些时间，因为Zettlr将查看每个文件并提取一些信息，然后这些信息将被缓存，因此在下次启动Zettlr时工作区应该会打开得更快。如果工作区需要一些时间才能显示出来，请不要慌张！

## 重新连接您的引用管理器

最后，如果您把Zettlr与引用管理器（类似Zotero）一起使用，您需要按照该管理器的软件迁移过程进行操作。引用管理器在新计算机上再次运行之后，您可以按照本文档中”[在Zettlr中启用引用](https://docs.zettlr.com/en/academic/citations/#enabling-citations-in-zettlr)“的步骤把它重新连接到Zettlr。
