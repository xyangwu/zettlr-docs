# 设置

Zettlr 提供了许多选项用于个性化设置，您可以进入三个主要对话框进行设置: [资源管理器](../advanced/assets-manager.md)、偏好、管理标签。

## 偏好

您可以使用快捷键 <kbd>Cmd/Ctrl</kbd>+<kbd>,</kbd>、工具栏按钮（齿轮图案）或相应的菜单项来打开常规偏好设置的对话框。对话框顶部有十个选项卡，分别对应各个类别的自定义选项。

* [常规](#general)：这些设置会影响 Zettlr 整体
* [编辑器](#editor)：这些设置仅涉及编辑器
* [导出](#export)：控制文件导出的方式
* [引用](#citations)：控制如何在 Zettlr 中加入引用
* [Zettelkasten](#zettelkasten)：调整 Zettlr 以适应您的 Zettelkasten 系统
* [显示](#display)：所有与显示相关的设置
* [拼写检查](#spellchecking)：拼写检查和语言工具（LanguageTool）
* [自动更正](#autocorrect)：自动更正和魔术引号（MagicQuotes）
* [高级](#advanced)：面向经验丰富的用户的选项
* [工具栏](#toolbar)：自定义工具栏按钮

### 常规设置

![settings_general.png](../img/settings_general.png)

如果您刚开始使用 Zettlr，也许会想要调整常规设置中的这些选项，以满足您的一般需求。

应用语言

: 设置应用程序显示的语言。更改将在重启应用后生效。请注意，并非所有翻译都已全部完成，因此您可能会在某些地方看到英文字符。如果您想要改进翻译，请看[如何帮助翻译应用](../getting-started/get-involved/#translating-the-app)。

深色模式

: 控制应用色调是深色还是浅色。通常会根据您在“自动切换到深色模式”的设置自动生效（请参阅下文）。 也可用 <kbd>Cmd</kbd>/<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>L</kbd> 切换。

显示文件信息

: 控制*文件列表*（文件管理器的简约模式/展开模式中可见）是否显示有关文件的元信息，例如标签或写作目标。

始终加载远程更改到当前文件

: 如果选中该选项，Zettlr 将悄悄重新加载文件的任何远程更改。如果未选中，系统将询问是否加载该文件的远程更改。

避免打开文件到新标签页

: 默认情况下，Zettlr 会打开每个文件为一个新标签页。 勾选此项将使 Zettlr 尝试把当前标签页切换为要打开的文件。

自动切换深色模式

: **关闭**: Zettlr 永远不会自动更改深色模式设置
: **计划**: Zettlr 将在“在...开始/结束深色模式”中指定的时间切换/退出深色模式
: **跟随系统设置**: 跟随操作系统的深色模式设置（不适用于 Linux）

深色模式开始时间

: 指定一个时间（格式: HH:MM），Zettlr 将自动从浅色模式切换到深色模式。

深色模式结束时间

: 指定一个时间（格式: HH:MM），Zettlr 将自动从深色模式切换到浅色模式。

文件管理器模式

: 控制左侧面板中的文件管理器将如何显示您的工作空间和文件。

: **切换**: 显示目录树或者文件列表（不同时显示），选择一个目录会显示里面的文件列表。单击目录树或文件列表左上角出现的箭头按钮，在文件列表和目录树之间切换。

: **分栏**: 左右栏分别显示目录树和文件，但需要选择一个文件夹以展开里面的文件列表。

: **合并**: 在文件树中显示目录树和文件。此模式下文件列表不可见。

显示文件的方式

: **只显示文件名**: 始终只显示每个文件的文件名，不显示标题或一级标题。

: **标题**: 显示文件的 YAML 文件头中的标题。如不适用，显示文件名。

: **显示第1个一级标题**: 显示第1个一级标题。如不适用，显示文件名。

: **显示标题或第1个一级标题**: 显示 YAML 文件头中的标题。如不适用，显示第1个一级标题。如果都不适用，则显示文件名。

显示 Markdown 文件扩展名

: 如果选中，Zettlr 将显示 Markdown 文件的扩展名（e.g., `*.txt`, `*.md`, `*.markdown`）. 只有当您选择用文件名来显示文件时，本选项才能生效。

文件的排序顺序（用于按名称排序）

: **自然顺序（10在2后）**: 按符合常规逻辑的方式对文件排序，因此数字10将排在数字2之后，即使数字2前没有0。

: **ASCII顺序（2在10后）**: 逐个按字符对文件进行排序，这意味着2将排在1之后。要使2排在10之前，请在2前面加上0。

在文件上方显示文件夹

: 默认情况下，Zettlr 会先显示文件，然后显示文件夹。选中该选项将先显示文件夹，需要重启应用才能生效。

按时间排序时使用的排序方法

:**最后修改时间**: 按最后一次修改文件的时间排序。
:**文件创建时间**: 按创建文件的时间排序。

在文件中显示元数据

:**最后修改时间**: 在适当的位置显示您最后一次修改文件的时间（例如，文件列表中的元信息（。
:**文件创建时间**: 在适当的位置显示文件的创建时间。

### 编辑器

![settings_editor.png](../img/settings_editor.png)

“编辑器”选项卡控制主编辑器的大部分功能。

选择要被粗体/强调命令使用的格式字符

: 选择星号（`*`）或下划线（`_`）作为格式字符，当您按 <kbd>Command/Ctrl</kbd>+<kbd>B</kbd> 或 <kbd>Command/Ctrl</kbd>+<kbd>I</kbd> 来把文字变为斜体或粗体时，Zettlr 将根据您的设置来插入格式字符。

自动保存

: **关闭**: 不自动保存。您需要使用 <kbd>Command/Ctrl</kbd>+<kbd>S</kbd> 手动保存。
: **马上**: 立即保存每次更改。这会在非常短的 250 毫秒延迟后完成，以减轻硬盘负担。
: **短暂延迟后**: 在您停止输入五秒后自动保存您的文件。

默认图片路径（相对或绝对路径）

: 您粘贴到文档中的图片存储位置，比如，设置为“assets”，Zettlr 会将图片放入 Markdown 文件同级的“assets”相对路径文件夹下。如果设置了绝对路径，则所有图片都将放入同一个文件夹中。推荐使用相对文件夹。

使用以下数量的空格来缩进

: 缩进数目会影响导出文件的格式。如果设置得太小，一些解析器可能无法正确缩进列表。建议设置为 4，这应该适用于大多数解析器。对于某些较旧的解析器，2个空格可能太少。

使用制表符缩进

: 使用制表符字符而不是空格来缩进。请注意，YAML 不允许使用制表符字符，因此打开此设置时，请确保使用空格缩进 YAML 文件头内容，否则它们将无法正常使用。

编辑器字体大小

选择编辑器的字体大小（单位是像素）。如果在高级设置选项卡中将“缩放行为”选项设置为“编辑器字体大小”，您还可以使用缩放快捷键 <kbd>Command/Ctrl</kbd>+<kbd>+</kbd> 和 <kbd>Command/Ctrl</kbd>+<kbd>-</kbd> 来控制字体大小。

在阅读模式中使用的算法

开启阅读模式时使用的算法；有四种模式可选。有关每个模式的作用的详细信息，请参阅[开启阅读模式的文档](https://www.zettlr.com/readability).

编辑器输入模式

: **Normal**: Zettlr 将像普通的文本编辑器一样运行。
: **Emacs**: 添加 Emacs 快捷键和键盘绑定到编辑器。
: **Vim**: 实现了 Vim 编辑器的一些功能。_此设置仅推荐给高级用户，因为它会改变您在编辑器中输入文本的方式！_

检查 Markdown 是否存在样式问题

: 开启 Markdown 代码检查器，它将突出显示您 Markdown 语法中潜在的格式问题。

显示状态栏

: 为每个编辑器开启状态栏（类似于 Word 或 LibreOffice 的实现方式），该状态栏可提供有关文件的其他元数据，并显示所有问题（包括拼写错误）信息和 LanguageTool 状态。

在专注模式下隐藏非当前行

: 当您使用专注模式时，此功能会使当前正在编辑的行之外的所有行变暗。

字符对自动配对

: 在您键入括号和引号，编辑器会自动加入下一个匹配的字符

使用自动补齐时包含空格

: 为了减小自动补齐对书写过程的影响，输入空格会取消当前的自动补齐。如果您需要在自动补齐的搜索中包含空格，请开启这一选项。_该设置不会影响标签和标题的自动补齐，因为这些地方不允许使用空格。_

启用表格编辑器

: 启用或禁用内置的 [表格编辑器](../core/tables.md)。表格编辑器可以方便地以图形方式创建和编辑 Markdown 表格。

统计字符的数量而不是词语的数量

如果您使用的语言中词语由单个字符表示（例如日语或汉语），请打开此设置，以便 Zettlr 按这些单个字符统计字数，而不是按由空格分隔的连续字符串计数。如果您更喜欢查看字符计数而不是词语计数，也可以打开此设置。

### 导出

![settings_export.png](../img/settings_export.png)

“导出”选项卡包括了有关导出文件的各种偏好设置。

使用内置的 Pandoc 导出

: 默认情况下，Zettlr 使用其自身的 Pandoc。如果您想要或必须使用系统范围内安装的 Pandoc（必须在 PATH 中），请禁用此设置。重启应用后，Zettlr 将使用系统路径中的 Pandoc。

删除文档中的标签

: 如果选中此选项，Zettlr 将运行一个特殊的 Lua 过滤器，该过滤器会删除文件内定义的标签（不包括 YAML 文件头中的标签）。

彻底删除内部链接

: 如果选中此选项，则格式为 `[[<ID>]]`（默认：`[[20220117101322]]`）的内部链接将在导出时完全删除。

取消链接内部链接

: 如果选中此选项，格式为 `[[<ID>]]` 的内部链接将被取消链接，因此只剩下链接内容。

不改变内部链接

: 这会将内部链接保持原样。

导出文件的目标目录

: **临时目录**：导出所有文件到临时目录。这可以让您频繁导出，一旦您对文件结果感到满意，就可以使用“另存为...”功能（例如，用于导出PDF的Adobe Reader）用默认应用程序保存到您选定的文件夹中。临时目录中的文件会在重新启动计算机后或其他时间自动删除。_推荐您选择该设置。_

: **当前工作目录**：始终将导出文件放入源文件的目录中。后续导出将覆盖以前的导出。虽然此选项让您不必使用“另存为...”来保留导出的文件，但这可能会导致文件混乱，因此不推荐选择该选项。

: **询问目录**：每次导出时询问文件导出位置。

自定义命令

: 此部分允许您自定义导出命令。命令的名称将显示在单个文件导出的弹出窗口和项目设置中。Zettlr 会（作为子进程）运行此命令，请在此处粘贴能够在终端中运行的内容（例如，类 Unix 系统的 bash 或 zsh，或 Windows 上的 PowerShell 或命令行）。

: 该命令将要有一个输入参数：导出文件的绝对路径（对于单个文件导出）或整个绝对文件夹路径（对于整个项目导出）。然后，您的命令才能自行使用输入的参数信息。

: > **注意:** 不要随便添加您未理解的命令。这可能会给您的数据或计算机安全造成危害。请在修改此设置之前阅读[安全注意事项](../getting-started/a-note-on-security.md)。

### 引用

![settings_citations.png](../img/settings_citations.png)

自动完成功能如何插入引文

: 选择您最常用的引文格式。如果您需要其他格式，随时可修改自动完成的引文。_注意：这仅适用于自动完成引用关键字（citation key）的情况。_

: [@Author2015, p. 123]：当您开始键入引文时，Zettlr 会自动将其用方括号括起来，以便您可以创建完整引用，例如，以上格式会显示为（Author 2015, 123）.

: @Author2015：选择此设置意味着 Zettlr 将仅完成引用关键字，不会做任何其他操作。如果您经常在文中直接引用作者姓名，这非常有用。例如显示 Author（2015）.

: @Author2015 [p. 123]：Zettlr 会在引用关键字之后添加方括号，例如 Author(2015, 123)。

引文数据库（CSL JSON 或 BibTex 格式）

: 选择包含引用数据的全局主库。仅适用于文件头（front matter）的`bibliography`键没有特定数据库的文档，这些文档将从自己的引文库而不是从主库接收引用键。_注意：目前不支持 BibLaTeX。_

CSL 风格（可选）

: 选择一个 CSL 样式表来覆盖默认引文样式（APA）。您可以从 [Zotero样式库](https://www.zotero.org/styles)下载。_注意：这仅会影响导出。出于预览目的，Zettlr 内将始终使用正文引用（in-text citation）样式。您也可以为每个配置文件和每个文件选择特定的 CSL 样式表。_

### Zettelkasten（知识卡片盒，中译文档将使用原词 --译注）

![settings_zettelkasten.png](../img/settings_zettelkasten.png)

在此选项卡中，您可以对 Zettlr 进行自定义，接入您现有的 Zettelkasten 系统。在大多数情况下，您无需修改这些选项，除非您想要使用个性化的系统。

ID正则表达式

: 使用的是 JavaScript 正则表达式，能匹配您在 Zettelkasten 系统中使用的ID（默认：`(\d{14})`）。Zettlr将使用此表达式查找您文件的ID。找到的第一个ID将被使用。Zettlr 会首先搜索文件名（例如，当您使用`20220117102945.md`作为文件名时），然后搜索内容。

用于生成新ID的模式

: 使用多个变量的组合来作为变化的ID。您可以正则表达式来匹配这些ID。可用变量：`%Y`（年份，四位数字），`%y`（年份，两位数字），`%M`（月份，两位数字），`%D`（日期，两位数字），`%W`（周，两位数字），`%h`（小时，两位数字），`%m`（分钟，两位数字），`%s`（秒，两位数字），`%X`（Unix 时间戳），`%uuid4`（UUID v4）。

仅链接文件名

: 若选择该项，Zettlr 会使用文件名进行链接，而不使用文件ID。适用于某些 Zettelkasten 系统。

当链接文件时，添加文件名...

: _注意：仅在禁用“仅链接文件名”时可用._

: **总是**：始终添加文件名，即使文件没有ID，因而可能会导致文件名重复（例如，`[[Filename.md]] Filename.md`）。

: **只在链接时使用ID**：如果要链接的文件有ID，则添加文件名（例如，如果文件有ID，则为`[[20220117102945]] Filename.md`，否则为`[[Filename.md]]`）。

: **从不**：即使在使用ID链接，也不添加文件名（例如，如果文件有ID，则为 `[[20220117102945]]`，否则为`[[Filename.md]]`）。

追踪 Zettelkasten 链接时搜索

: 若选择该项，Zettlr 将对您刚追踪的链接的内容进行全文搜索。

追踪内部链接时自动创建不存在的文件

: 若选择该项，Zettlr 将在找不到文件的情况下自动创建与文件链接匹配的新文件（例如，点击`[[non-existing-file]]`将自动创建文件`non-existing-file.md`）。

将自动创建的文件放入此目录（必须在 Zettlr 已加载）

: 如果 Zettelkasten 与其他目录一起加载到 Zettlr 中时，此设置很有用。如果您把该项设置为一个已加载到 Zettlr 中的目录，自动创建的任何文件都会放入该目录。_注意：此设置仅适用于单击内部链接，不适用于手动创建新文件。_

### 显示

![settings_display.png](../img/settings_display.png)

此选项卡控制编辑器如何显示某些元素。Zettlr采用部分预览的方式显示Markdown文档，仅渲染特定的元素。在此选项卡中，您可以控制渲染哪些元素。

渲染引用

: 以预览格式渲染引用（始终为正文内引用）。需要在“引用”选项卡中加载引用数据库，或者文件 YAML 文件头的`bibliography`键具备供该文件使用的引用数据库。

渲染内嵌框架（Iframes）

: 显示嵌入式内容，（例如 YouTube 或 Vimeo 视频）。

渲染图片

: 显示文件中的图片。

渲染链接

: 使文件中的链接可点击。

渲染公式

: 渲染文件中的[数学公式](../core/math.md)（用美元符号包围）。

渲染任务

: 渲染文件中标记为（`- [ ]`）的任务列表。

隐藏标题字符

: 显示一个表示标题级别的元素，而不显示标题符号（`#`）。单击该元素可更改标题级别。

渲染强调

: 启用伪所见即所得（WYSIWYG）模式，尝试完全隐藏所有格式化字符，除非将光标移到它们上面。

主题

: 从多种主题中选择一个。您可以使用[自定义CSS](../advanced/custom-css.md)进一步自定义外观。

使用操作系统强调色而不是应用内主题

: 禁用此选项时，Zettlr使用主题的强调色突出显示某些元素。启用此选项时，将使用您操作系统的强调色，该颜色可在系统偏好中设置。_注意：此功能在Linux上可能无效，会把Crayola绿作为Zettlr的高亮色。_

在专注模式下隐藏工具条

: 选择该选项将在专注模式时隐藏工具条。

图片最大宽度（%）

: 设置编辑器中图片的最大宽度（占编辑器总宽度的百分比）。较小的图像不会被拉伸。

图片最大高度（%）

: 设置编辑器中图片的最大高度（占窗口总高度的百分比）。较小的图像不会被拉伸。

### 拼写检查

![settings_spellchecking.png](../img/settings_spellchecking.png)

此对话框可控制编辑器中的拼写检查和语法设置。

使用语言工具（LanguageTool）

: 启用语言工具作为拼写、语法和风格检查器。**注意**：默认情况下，Zettlr将连接到官方的语言工具服务器并将您的文件内容发送到那里进行检查。如果您想让文件保持私密，请先在本地设置[语言工具](../guides/languagetool-local.md)并输入相应的URL到“自定义服务器”中。

严格（Strictness）

: 控制语言工具的严格级别。“挑剔”级别会开启一些额外的规则，更适合学术或新闻文本。

母语语义（Mother tongue）

: 此可选设置允许语言工具检查“假朋友（false friends）”。

语言工具提供者

: 选择使用官方的语言工具服务，还是自定义服务器（例如您或朋友设置的服务器）。

自定义服务器

: 在此处输入自定义服务器URL。如果您按照本地设置语言工具指南进行操作，URL可能看起来像: `http://localhost:8010/`。

语言工具的用户名

: 如果您订阅了语言工具高级版（Premium），则可以在此处输入您的用户名从而在 Zettlr 中使用您的高级订阅。**注意**：在此处输入用户名将**禁用**任何自定义服务器设置。如果设置了用户名或API密钥，Zettlr将忽略这些设置并总是连接官方服务。

语言工具的API key

: 如果您订阅了语言工具高级版，则可在此处输入您的API密钥。**注意**：在此处输入API密钥将**禁用**任何自定义服务器设置。如果设置了用户名或API密钥，Zettlr将忽略这些设置并总是连接至官方服务。

拼写检查

: 从列表中选择要使用的拼写检查词典。您可以启用多个词典，但我们建议不要激活超过两到三个。您可以按照[本说明](../core/style-and-grammar.md)安装其他词典。

用户词典

: 该列表包含您手动添加到用户词典的所有单词，您可以随时删除。

### 自动更正

![settings_autocorrect.png](../img/settings_autocorrect.png)

此选项卡控制Zettlr的自动更正功能，您也许曾在 LibreOffice 或 Word 中使用过这些功能。

启用自动更正

: 这会同时打开神奇引号（MagicQuotes，也译作”魔术引号“）和自动更正设置。如果您想要启用自动更正但更喜欢常规引号（”非神奇引号“），请在下拉列表中选择“禁用神奇引号”。

首选的神奇引号

: 把您本地的引号字符设置为首选引号。**注意**：您也可以在每个编辑器的状态栏中设置神奇引号，前提是在编辑器设置中激活了状态栏。

次选的神奇引号

: 与上面的设置相同. 次选引号通常用作引号内部的引号。

自动更正功能使用的字符替换表

: 您可以看到替换表内有一列用来替换字符的默认列表，例如把ASCII箭头（`-->`）替换为合适的箭头图标（`→`）。在按下<kbd>Space</kbd>键或<kbd>Enter</kbd>键后，Zettlr 会不断检查输入的字符，并替换匹配到的字符。

: 表中键值对可被删除, 下滑到表底添加更多键值对。

### 高级

![settings_advanced.png](../img/settings_advanced.png)

新文件名的模式

: 用于自定义新建文件时的默认文件名。此设置仅作为占位符，您随时都可修改文件名。可用变量：
`%id`（根据 [Zettelkasten](#zettelkasten) 选项卡中的模式生成的ID）
`%Y`（年份，四位数字）
`%y`（年份，两位数字）
`%M`（月份，两位数字）
`%D`（日期，两位数字）
`%W`（星期，两位数字）
`%h`（小时，两位数字）
`%m`（分钟，两位数字）
`%s`（秒，两位数字）
`%X`（Unix时间戳）
`%uuid4`（UUID v4）

创建新文件时不要提示文件名

: 选中后，Zettlr 将直接使用设置的模式创建文件，而不会弹出窗口要求您输入文件名。您仍然可以通过重命名来修改文件名。

启用调试模式

: 此功能仅对开发者有用，或当您被要求提供日志文件时有用。启用后，应用的菜单栏会多出一个“开发”选项，右键出现的上下文菜单也将提供“检查元素”功能，类似于浏览器中的功能。

当有新Beta版本发布时通知我

: 选中后，Zettlr 将通知您新的测试版的发布，而不仅仅通知稳定版本的发布。

使用本机窗口外观（仅限Linux）

: 由于 Linux 可用窗口管理器种类繁多，您可以勾选此选项使窗口外观与您使用的窗口管理器保持一致。此设置需要关闭并重新打开现有窗口才能生效。Zettlr 将在您更改此设置后提示重启应用。

启用活力效果（仅限macOS）

: macOS 窗口会有点透明，并根据其背后的内容改变背景颜色。然而，这有时可能会导致在不同显示器之间移动窗口时出现轻微延迟。如果您不喜欢这一效果，可以禁用此设置。Zettlr 将在您更改此设置后提示重启应用。

无法放入回收站时永久删除

: 默认情况下，Zettlr 会将删除的文件放入回收站，以便在需要时恢复。如果禁用了回收站或其他原因导致 Zettlr 无法将文件放入回收站，可以选择此选项，Zettlr 将永久删除这些文件。

在系统通知区域显示应用图标

: 选中后，会在通知区域或任务栏显示一个小的 Zettlr 图标。在 Windows 和 Linux 上，该设置还有一项作用是即使您关闭 Zettlr 的所有窗口，应用也不会退出。单击图标可恢复 Zettlr 的主窗口。

输入所有您想要在侧边栏中查看的附件扩展名

: Zettlr 只适用于处理一些纯文本文件。因此，它无法显示诸如 Excel 电子表格之类的文件。通过在此处添加扩展名，Zettlr 会在侧边栏中显示这些文件，以便您可以在文件中链接它们或使用外部默认程序打开它们。

iFrame渲染白名单

: iFrame存在安全风险。因此，您需要确认要显示哪些iFrame。此列表包含您已加入白名单的所有主机名，以便您可以删除意外加入白名单的不可信主机名。

启用看门狗轮询（旧版设置; 未来计划移除）

: 如果您在处理大型文件或计算机运行速度变慢了，可以启用此设置。默认情况下，Zettlr会监听计算机，以便收到该文件有外部更改的通知。如果您启用此设置，Zettlr将等待指定的时间间隔，然后才认为已经完成了更改。

完成编辑文件后等待的时间（毫秒）

: 如果 Zettlr 识别到太多远程更改，请增加此阈值。

### 工具栏

![settings_toolbar.png](../img/settings_toolbar.png)

控制工具栏上哪些按钮可见。大多数按钮能够被启用或禁用，但是一些按钮（例如文件管理器三向按钮和侧边栏按钮）无法禁用。

## 管理标签

![The Tags settings dialog](../img/tags_settings.png)

管理标签对话框没有快捷键，您需要使用对应的菜单项打开它，为标签添加颜色和描述。

点击对话框底部的`+`按钮，添加一个新的“标签-颜色”配对。在第一个空格中输入标签名称，无需在前面加上#（例如，如果您想为标签`#todo`指定颜色，只需输入`todo`）。接下来，选择该标签的颜色。单击标签名称后面的第二栏，会出现一个颜色选择器。在第三个空格输入标签的简短描述，当您悬浮在文件列表的标签上时，会显示标签描述。

点击标签文字底部的`-`按钮删除一个“标签-颜色”配对。
